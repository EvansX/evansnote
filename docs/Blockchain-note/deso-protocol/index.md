# DeSo Protocol

## 背景介绍

- 人们对于web2.0时代的社交网络有不满，其中主要集中在这些社交网络的绝对优势地位所带来的不平衡。
- 社交网络具有绝对的统治力，社交网络平台和第三方开发者及用户之间存在完全不平衡的关系。
- 当前的社交网络平台主导其推送算法，它会控制人们的信息流。

web2.0时代的社交网络是相对封闭的、不平衡的，而人们追求开放的社交网络形态。这就是下一代社交网络发展的源动力。

随着区块链的到来，从btc的探索开始，再到如今DeFi和NFT的逐步发展开来，人们看到基于区块链存在新的可能性，它带来一些范式上的变化，它可以重塑一些传统行业。

Deso在此背景下试图探索出基于区块链的社交网络路径，并为此专门构建一条DeSo区块链。


## DeSo的社交网络区块链

### 简介

DeSo前身Bitclout，BitClout一经推出就迅速出圈，其中有不少争议。主要是因为BitClout是在未经Twitter的用户（主要是名人）许可下，直接复制了他们的个人资料在BitClout上，而且这些用户需要支付约60美元的比特币才能获得自己的社交代币的控制权。比如Elon Musk都没有去注册，但BitClout给他开了账号，并且关联了Twitter的个人资料。而这样的名人有15000名。

而将bitclout更名为DeSo即体现出定位的改变，由社交平台转变为社交网络基础设施。

按照其官网介绍，它背后的支持者们几乎都是顶级的加密投资机构，其中包括Coinbase、a16z、红杉、Polychain、ParaFi、Pantera、Social Capital等等。

DeSo是专门为构建社交网络而推出的区块链，并在此基础上构建了Deso社交网络，其架构类似于比特币。
为了构建数据开放的社交网络，DeSo从构建区块链开始，当然，这也是因为当前区块链的扩展性无法承载社交网络的高互动需求。

DeSo的创始人是原Basis项目的创始人Nader（最初的Basis项目由于监管原因放弃，后来DeFi发展时期，社区有人自发推出了类似于Basis的项目）

因为DeSo是基于区块链的，所以具有以下特点：

- 任何人都可以运行提供DeSo内容的DeSo“节点”， 并且每个节点都存储所有数据的完整副本
  - 比如，ESPN可以在DeSo上运行节点，为用户提供体育内容。
- 任何人都可以在DeSo的数据基础上构建应用程序，而不用担心被去平台化
- 每个节点可以自行定制信息的审核和展示策略
  - 第三方开发者根据自定义用户界面和推送算法，可以给用户展现出跟当前社交网络不同的内容展示。
- 100% 开源，100% 链上开放数据，所有内容直接存储在链上。

就目前来看，基于其自身的区块链，DeSo构建的社交网络，跟传统的社交网络一样，可以发帖、评论、点赞、关注他人等。它的主要不同点在于它是运行在区块链上，且将用户的信息（个人资料、帖子、评论、关注关系、打赏、NFT等）等所有数据都存储在公共区块链上，具有无须许可和开放性。此外，它还引入了代币经济，除了自身的原生代币DESO之外，其中最重要的是引入“创作者代币”。

DeSo作为社交公链，很大程度上降低了创建新社交媒体产品的准入门槛，几乎任何人都可以在DeSo构建能够与现有社交媒体的体验相媲美的社交媒体。

简单来说，DeSo Protocol是去中心化的含有代币经济的社交网络基础设施协议。

### 愿景

- 构建开放的社交网络生态，在这种社交网络中，数据本身是开放的，任何人基于其数据都可以开发出满足用户需求的应用。
- 构建10亿用户体量的社交网络

### 代币经济

- $DeSo 原生代币
  - Total supply: ~10.8M Million coins
  - Initial Bonding Curve Distribution: ~8.5 million
  - Founders: 2 million
  - Mining: ~275000

![创作者代币曲线](https://1308127246-files.gitbook.io/~/files/v0/b/gitbook-legacy-files/o/assets%2F-MjtaOFcYRNwtiQWQDqI%2Fsync%2Fa45a2626af6a79b3886ca2fd8baa012b3fd02e92.png?generation=1631981232974027&alt=media)

- 创作者代币
  - 创作者代币是一种关联个人声誉而非公司或者商品的新型资产，是第一个可以将社会影响力可以作为资产交易的工具
  - 在平台上的每个用户资料中都有一个独特的可以被任何人买卖的代币，也就是“创作者代币”，它会在你创建用户资料时自动生成
  - 其代币价格会随着购买量增长而上升，反之随着出售量上升而下降
    - price_in_usd=.003×creator_coins_in_circulation^2×deso_price_in_usd
  - 人们可以因相信某人的潜力而购买其代币进行投资，并在其证明潜力和实现成功后在财务上得到回报
  - 用途
    - 权益人代表大会
      - 创作者可以只允许持有一定其代币的持币用户参加
    - 优先信息
      - 可以限定只有拥有一定数量其代币的用户发信或者就是直接的优先排序和增加持币多用户的信息优先级。
    - 赞助帖子
      - 创作者可以有一个收件箱， 这里任何人可以“出价”让他们去转发
    - 订阅内容
      - 拥有一定数量创作者代币的用户可以访问特殊内容，又或者人们需每月以创作者代币支付订阅费用才可以获得某些优质内容。
    - 粉丝互动
      - 创作者还可以使用其代币将稀有资源分配给最大的持币者。
        - 例如他们可以向前1000代币持有者增予1000张签名的海报。
    - 商业化点赞
      - 点赞可以被想象成对创作者代币的购买行为。点赞需要花费一定成本，但是相应的您也可以获得您点赞的创作者的代币
    - 创始人奖励
      - 每个账户都会允许保留一定比例的代币作为“创始人奖励”。
        - 例如：如果某人将其创始人奖励设置为10%，那么有人购买了价值100DeSo的其代币，相应的10DeSo代币会用来购买创作者代币，这些代币将会发送到创作者而非购买者的钱包

### 开源代码简介

在DeSo区块链上运行的应用程序（例如Diamond）通常由四个组件组成：frontend、backend、core和Identity。该软件架构封装了所有需要运行的内容，以便制作像Diamond这样的Web3去中心化社交平台。这种架构使您能够运行自己的DeSo节点并访问所有区块链数据。

- github.com/deso-protocol/core

  这是一个Golang存储库，其中包含DeSo背后的所有“共识”代码。它是作为库嵌入到想要在DeSo firehose上构建的项目中的内核。

- github.com/deso-protocol/backend

  后端repo将核心嵌入为一个库，并在其上公开丰富的API以支持交易构建、向区块链提交交易、存储用户数据等。从某种意义上说，它是第一个建立在核心DeSo区块链上的“参考”应用程序。

- github.com/deso-protocol/frontend

  这是一个Angular应用程序，类似于diamondapp.com的前端。它使用后端存储库公开的 API 来支持其所有查询。

- github.com/deso-protocol/identity

  这是一个轻量级的可嵌入应用程序，它作为iFrame加载到前端Angular应用程序中以处理所有签名功能。

下面是一个简单的图表，直观地显示了这些存储库如何组合在一起：

![代码结构](https://1308127246-files.gitbook.io/~/files/v0/b/gitbook-x-prod.appspot.com/o/spaces%2F-MjtaOFcYRNwtiQWQDqI%2Fuploads%2F2kLr2gXE1UCQd2WkLVeG%2Fimage%2520(14).png?alt=media&token=4640a05c-45df-4e9f-b2e1-5dd0502c2cb5)

#### frontend

- 这是一个Angular应用程序，使用后端存储库公开的 API 来支持其所有查询。
- 提供了DeSo Dapp的开发模板

#### backend

功能

- 构建交易
- 提交交易
- 存储和查询数据

交易API类型

- 金融交易
  - 发送DeSo
  - 购买或者出售创作者代币
  - 转移创作者代币
- 社交交易
  - 更新profile
  - 提交帖子
  - 关注
  - 发送钻石
  - 收藏
  - 发信息
- NFT交易
  - 创建NFT
  - 更新NFT
  - 创建NFT出价
  - 接受NFT出价
  - 转移NFT
  - 接受NFT转账
  - 销毁NFT
- 派生秘钥交易
- DAO交易
  - 创建DAO Coin
  - 转移DAO Coin

#### identity

这是一个轻量级的可嵌入应用程序以处理所有签名功能。

- 这是一个轻量级的可嵌入应用程序以处理所有签名功能。
- DeSo 身份服务，它将用户身份验证的密码复杂性隐藏在一个简单的window API 下。
- Identity 作为一个安全容器，可以通过 Identity API 进行查询，以处理与用户密钥材料相关的所有功能。
- 允许您在没有用户交互的情况下执行诸如签署交易或加密/解密消息之类的操作。
- 无需担心实现任何 HTML 表单或输入验证，您只需正确调用window API。
- Identity Service 将通过 postMessage 与您的应用程序通信。
- iframe API
  - sign
  - encrypt
  - decrypt
- window API
  - window API负责将Identity作为弹出窗口或新选项卡打开。

帐户工作流程涉及以下步骤：

- 1 .应用程序使用API接口在上下文中打开Identity window/log-in。
- 2 .当用户完成登录流程时，Identity 会发送一个包含 `PublicUserInfo`的响应，该响应将在与iframe下文交换消息时使用。
- 3 .应用程序关闭身份window并将`PublicUserInfo`步骤2中的内容存储到本地存储。
- 4 .应用程序在向iframe上下文发送消息时使用`PublicUserInfo`来处理交易签名、消息解密和其他方法。
- 5 .应用程序可能会启动更多window来处理需要用户交互的其他操作。
这种通信模式几乎涵盖了与DeSo Identity的所有交互。

`PublicUserInfo`中的accessLevel标识访问级别，访问级别决定了哪些操作需要用户批准。这里的批准意味着我们需要在窗口上下文中启动Identity，以便用户可以查看并手动确认交易。分为以下几个级别:

- 用户收回授权
- 所有交易都需要授权
- 所有buys|sells|sends需要授权Approval
- 所有交易都不需要用户授权。体验较好，操作无感

![访问级别](https://1308127246-files.gitbook.io/~/files/v0/b/gitbook-x-prod.appspot.com/o/spaces%2F-MjtaOFcYRNwtiQWQDqI%2Fuploads%2FLlgLGiIN8IImSBXkNr1z%2FScreenshot%20from%202021-11-22%2001-13-56.png?alt=media&token=479dc01b-39bd-41f9-a675-90108c2b82cf)

#### core

包含DeSo背后的所有“共识”代码。它是作为库嵌入到想要在 DeSo firehose 上构建的项目中的内核。

#### 生命周期

DeSo区块链上的交易具有三步生命周期:

- 构造：开发人员的第一步是通过端点与DeSo后端API进行交互，获取未签名的用户交易。
- 签名：然后，开发人员将从TransactionHex构造步骤的响应中获取输出，该响应对用户交易进行编码，并使用DeSo Identity服务对其进行签名。
- 广播：签名的交易将由开发者通过/api/v0/submit-transaction，以便添加到区块链账本中。

### DeSo区块链

#### 交易结构

交易是基于比特币的UTXO模型

- 交易结构
  - TxInputs
  - TxOutputs
  - TxnMeta
    - 这是一个因交易类型而异的对象。它包含描述交易的元数据。例如，在更新个人资料的交易中，TxnMeta将包括NewUsername和NewProfilePic
  - ExtraData
    - 可以包含任何添加有关交易的附加信息的键值对。
  - Signature
  - TxnTypeJSON
  - PublicKey

#### 节点运行激励

从长远来看，激励措施是使DeSo真正去中心化的关键。节点由社区运行是不够的，它们也必须是有利可图的。许多加密货币都在为此苦苦挣扎。然而，DeSo在这方面确实是独一无二的，因为它引入的社交功能为节点运营商提供了其他区块链所没有的激励。

DeSo节点运营商可以通过以下几种方式获利：

- 推广内容
  - 积累创作者代币
- 交易费
  - 任何运行节点的人都可以修改他们的前端，为每笔创作者硬币交易添加交易费用，这些费用会进入节点运营商的钱包。
- 其它交易费用
  - 任何在一个节点上完成的交易用户都可以被扩充为包含一小笔费用，该费用将支付给节点运营商。

## 能做些什么？

介绍完DeSo的一些基本概念之后，我们再来看看这个协议到底能用来做什么？如何使用？

迄今为止官网上声称有200多个基于DeSo构建的应用程序。Discover DeSo Projects: https://desolist.cc/

案例分析
社交媒体：https://Diamondapp.com
区块浏览器：https://www.openprosper.com/

## 优缺点分析

- 优点
  - 运行在区块链上，具有无须许可和开放性
  - 吞吐量大
  -引入了代币经济，激励创作者
- 缺点
  - 生态较封闭
  - 生态规模较小
  - 开发者社区热度不高
